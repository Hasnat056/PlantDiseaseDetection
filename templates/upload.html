{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Disease Detection - AI-Powered Plant Health Analysis</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2322c55e;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23059669;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='48' fill='url(%23grad)' stroke='%23ffffff' stroke-width='2'/%3E%3Cpath d='M50 15 C35 15 25 25 25 35 C25 45 30 50 35 55 L35 65 C35 70 40 75 50 75 C60 75 65 70 65 65 L65 55 C70 50 75 45 75 35 C75 25 65 15 50 15 Z' fill='%23ffffff'/%3E%3Cpath d='M45 25 L50 35 L55 25 M40 40 L50 45 L60 40 M42 55 L50 60 L58 55' stroke='%2322c55e' stroke-width='2' fill='none'/%3E%3Ccircle cx='35' cy='30' r='3' fill='%23ef4444' opacity='0.8'/%3E%3Ccircle cx='65' cy='45' r='2' fill='%23f59e0b' opacity='0.7'/%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #22c55e;
            --primary-dark: #16a34a;
            --secondary-color: #f0fdf4;
            --accent-color: #059669;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --background: #ffffff;
            --surface: #f8fafc;
            --border: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--background);
            background-image: url("{% static 'Background.jpg' %}");
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header.scrolled {
            box-shadow: var(--shadow-md);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 70px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--primary-color);
            text-decoration: none;
        }

        .logo i {
            font-size: 1.75rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        /* Hero Section */
        .hero {
            padding: 8rem 1.5rem 4rem;
            background: linear-gradient(135deg, rgba(240, 253, 244, 0.9) 0%, rgba(255, 255, 255, 0.8) 100%);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2322c55e' fill-opacity='0.05'%3E%3Cpath d='m36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
            opacity: 0.4;
        }

        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .hero-text {
            text-align: center;
            margin-bottom: 4rem;
            animation: fadeInUp 0.8s ease forwards;
        }

        .hero h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.1;
        }

        .hero p {
            font-size: clamp(1.125rem, 2vw, 1.25rem);
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto 2rem;
        }

        /* Features Grid */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .feature {
            text-align: center;
            padding: 2rem;
            background: var(--background);
            border-radius: 1rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .feature:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-color);
        }

        .feature i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: block;
        }

        .feature h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .feature p {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Upload Section */
        .upload-section {
            background: var(--background);
            border-radius: 2rem;
            padding: 3rem;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border);
            animation: fadeInUp 0.8s ease 0.4s both;
            position: relative;
            overflow: hidden;
            max-width: 60%;
            margin: 0 auto;
        }

        .upload-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
        }

        .upload-title {
            text-align: center;
            margin-bottom: 2rem;
        }

        .upload-title h2 {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .upload-title p {
            color: var(--text-secondary);
        }

        .upload-area {
            border: 2px dashed var(--border);
            border-radius: 1.5rem;
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--surface);
            position: relative;
            overflow: hidden;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background: var(--secondary-color);
            transform: scale(1.02);
        }

        .upload-area.dragover {
            border-color: var(--primary-color);
            background: var(--secondary-color);
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.2);
        }

        .upload-icon {
            font-size: 4rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
        }

        .upload-text h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .upload-text p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .file-info {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(34, 197, 94, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.875rem;
            color: var(--primary-color);
        }

        input[type="file"] {
            display: none;
        }

        .preview-container {
            margin-top: 2rem;
            display: none;
        }

        .preview-image {
            max-width: 100%;
            max-height: 300px;
            border-radius: 1rem;
            box-shadow: var(--shadow-lg);
            transition: transform 0.3s ease;
        }

        .preview-image:hover {
            transform: scale(1.05);
        }

        .upload-button {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 0.75rem;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 2rem;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .upload-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .upload-button:active {
            transform: translateY(0);
        }

        .upload-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        /* Loading Animation */
        .loading {
            display: none;
            margin: 2rem auto 0;
            width: 60px;
            height: 60px;
            border: 4px solid var(--border);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .header-content {
                padding: 0 1rem;
            }

            .nav-links {
                display: none;
            }

            .hero {
                padding: 6rem 1rem 3rem;
            }

            .features {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .feature {
                padding: 1.5rem;
            }

            .upload-section {
                max-width: 90%;
                margin: 0 auto;
                padding: 2rem 1.5rem;
                border-radius: 1.5rem;
            }

            .upload-area {
                padding: 2rem 1rem;
            }

            .upload-icon {
                font-size: 3rem;
            }

            .upload-text h3 {
                font-size: 1.25rem;
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: 5rem 0.75rem 2rem;
            }

            .upload-section {
                max-width: 95%;
                margin: 0 auto;
                padding: 1.5rem 1rem;
            }

            .upload-area {
                padding: 1.5rem 0.75rem;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="header-content">
            <a href="#" class="logo">
                <i class="fas fa-seedling"></i>
                PlantCare AI
            </a>
            <nav>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <div class="hero-text">
                <h1>Plant Disease Detection</h1>
                <p>Harness the power of artificial intelligence to instantly identify plant diseases. Upload an image of your plant leaf and get accurate diagnosis with treatment recommendations in seconds.</p>
            </div>

            <!-- Features Grid -->
            <div class="features">
                <div class="feature">
                    <i class="fas fa-brain"></i>
                    <h3>AI-Powered Analysis</h3>
                    <p>Advanced machine learning algorithms trained on thousands of plant images for accurate disease detection.</p>
                </div>
                <div class="feature">
                    <i class="fas fa-clock"></i>
                    <h3>Instant Results</h3>
                    <p>Get immediate analysis and diagnosis within seconds of uploading your plant image.</p>
                </div>
                <div class="feature">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>Mobile Friendly</h3>
                    <p>Access our platform from any device, anywhere. Perfect for field work and garden care.</p>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="upload-section">
                <div class="upload-title">
                    <h2>Upload Plant Image</h2>
                    <p>Take a clear photo of the affected plant leaf for best results</p>
                </div>

                <form id="uploadForm" action="{% url 'predictor:predict_image' %}" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="upload-area" id="dropArea">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-text">
                            <h3>Drag & Drop Your Image</h3>
                            <p>or click to browse from your device</p>
                            <div class="file-info">
                                <i class="fas fa-info-circle"></i>
                                Supports JPG, PNG, WebP up to 10MB
                            </div>
                        </div>
                        <input type="file" id="fileUpload" name="image" accept="image/*" required aria-label="Upload plant image">
                    </div>

                    <div class="preview-container" id="previewContainer">
                        <img id="preview" src="#" alt="Uploaded plant image preview" class="preview-image">
                    </div>

                    <button type="submit" class="upload-button" id="uploadButton">
                        <span>Analyze Plant Disease</span>
                    </button>
                </form>

                <div class="loading" id="loadingSpinner" aria-label="Analyzing image..."></div>
            </div>
        </div>
    </section>

    <script>
        // Header scroll effect
        const header = document.getElementById('header');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        // Upload functionality
        const dropArea = document.getElementById('dropArea');
        const fileInput = document.getElementById('fileUpload');
        const preview = document.getElementById('preview');
        const previewContainer = document.getElementById('previewContainer');
        const form = document.getElementById('uploadForm');
        const loading = document.getElementById('loadingSpinner');
        const uploadButton = document.getElementById('uploadButton');

        // Prevent default drag behaviors
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
            document.body.addEventListener(eventName, preventDefaults, false);
        });

        // Highlight drop area when item is dragged over it
        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });

        // Handle dropped files
        dropArea.addEventListener('drop', handleDrop, false);

        // Handle click to upload
        dropArea.addEventListener('click', () => fileInput.click());

        // Handle file selection
        fileInput.addEventListener('change', handleFiles);

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        function highlight() {
            dropArea.classList.add('dragover');
        }

        function unhighlight() {
            dropArea.classList.remove('dragover');
        }

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            fileInput.files = files;
            handleFiles();
        }

        function handleFiles() {
            const file = fileInput.files[0];
            if (file) {
                // Validate file type
                if (!file.type.startsWith('image/')) {
                    alert('Please upload an image file (JPG, PNG, WebP)');
                    return;
                }

                // Validate file size (10MB)
                if (file.size > 10 * 1024 * 1024) {
                    alert('File size must be less than 10MB');
                    return;
                }

                showPreview(file);
                uploadButton.disabled = false;
            }
        }

        function showPreview(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.src = e.target.result;
                previewContainer.style.display = 'block';

                // Add smooth reveal animation
                setTimeout(() => {
                    preview.style.opacity = '1';
                    preview.style.transform = 'scale(1)';
                }, 100);
            };
            reader.readAsDataURL(file);
        }

        // Form submission
        form.addEventListener('submit', function(e) {
            if (!fileInput.files[0]) {
                e.preventDefault();
                alert('Please select an image to upload');
                return;
            }

            loading.style.display = 'block';
            uploadButton.disabled = true;
            uploadButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
        });

        // Add smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add intersection observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationPlayState = 'running';
                }
            });
        }, observerOptions);

        // Observe elements for animation
        document.querySelectorAll('.feature, .upload-section').forEach(el => {
            observer.observe(el);
        });
    </script>
</body>
</html>